events {}

http {
  resolver 127.0.0.11 valid=30s;  # Docker's internal DNS

  server {
    listen 80;
    server_name localhost;

    location / {
      set $upstream_node node:3000;
      proxy_pass http://$upstream_node;
      proxy_set_header Host $host;
    }
  }
}